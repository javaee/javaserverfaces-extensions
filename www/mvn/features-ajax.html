<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>JavaServer Faces Technology Extensions - 
    JSF Extensions AJAX</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://java.sun.com/" id="bannerLeft">
    
                                            <img src="images/corpweb-power.gif" alt="" />
    
            </a>
                        <a href="http://java.sun.com/javaee/downloads/" id="bannerRight">
    
                                            <img src="images/javaeesdkdownload.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
            <div class="xleft">
        Last Published: 2006 12 05
                      </div>
            <div class="xright">      <a href="http://wiki.java.net/bin/view/Projects/JsfExtensionsFaq">FAQ</a>
          |
          <a href="http://java.sun.com/javaee/javaserverfaces/">JSF</a>
          |
          <a href="http://javaserverfaces.dev.java.net/">Sun JSF</a>
          |
          <a href="http://java.sun.com/javaee/downloads/index.jsp">Java EE</a>
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
                   <h5>JSF Extensions</h5>
        <ul>
              
    <li class="none">
              <a href="index.html">home</a>
        </li>
              
    <li class="none">
              <a href="http://wiki.java.net/bin/view/Projects/JsfExtensionsFaq">FAQ</a>
        </li>
              
    <li class="none">
              <a href="http://jsf-extensions.dev.java.net/servlets/ProjectMembershipRequest">Join Project</a>
        </li>
              
    <li class="none">
              <a href="http://jsf-extensions.dev.java.net/servlets/WatchProject">Watch Project</a>
        </li>
              
    <li class="none">
              <a href="http://jsf-extensions.dev.java.net/servlets/ProjectDocumentList">Download</a>
        </li>
              
    <li class="none">
              <a href="http://jsf-extensions.dev.java.net/servlets/ProjectIssues">Issue Tracking</a>
        </li>
              
    <li class="none">
              <a href="http://jsf-extensions.dev.java.net/source/browse/jsf-extensions/">Version Control - SCM</a>
        </li>
              
    <li class="none">
              <a href="http://wiki.java.net/bin/view/Projects/JsfExtensionsFaq#How_do_I_Build_It_">Building</a>
        </li>
              
    <li class="none">
              <a href="http://wiki.java.net/bin/view/Projects/Jsf-extensions">Wiki</a>
        </li>
              
    <li class="none">
              <a href="http://jsf-extensions.dev.java.net/servlets/ProjectNewsList">Announcements</a>
        </li>
              
    <li class="none">
              <a href="http://jsf-extensions.dev.java.net/servlets/ProjectMailingListList">Mailing Lists</a>
        </li>
              
    <li class="none">
              <a href="slides.html">Slides and Screencasts</a>
        </li>
          </ul>
          <h5>Runtime Features</h5>
        <ul>
              
          
              
            
            
      
            
      
            
      
            
      
              
            <li class="expanded">
              <strong>Ajax</strong>
                <ul>
                  
    <li class="none">
              <strong>Overview</strong>
        </li>
                  
    <li class="none">
              <a href="gettingstarted-ajax.html">Getting Started</a>
        </li>
                  
    <li class="none">
              <a href="reference-ajax.html">Reference</a>
        </li>
                  
    <li class="none">
              <a href="ajax/apidocs/index.html">JavaDoc</a>
        </li>
                  
    <li class="none">
              <a href="ajax/tlddocs/index.html">TagLibraryDoc</a>
        </li>
              </ul>
        </li>
              
    <li class="none">
              <a href="features-flash.html">Flash</a>
        </li>
              
    <li class="none">
              <a href="features-zdt.html">Zero Deployment Time</a>
        </li>
          </ul>
          <h5>Test Time Features</h5>
        <ul>
              
    <li class="none">
              <a href="features-test.html">Test</a>
        </li>
          </ul>
          <h5>Project Documentation</h5>
        <ul>
              
                
              
      
            
      
              
        <li class="collapsed">
              <a href="project-info.html">Project Information</a>
              </li>
          </ul>
                                       <a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

  

  
    
    <a name="AJAX"></a><div class="section"><h2>AJAX</h2>
    <a name="AJAX"></a>

      <p>In late September 2005, JSF Expert Group member <a href="http://weblogs.java.net/blog/jhook/">Jacob Hookom</a> wrote
      a blog about an idea he had regarding <a href="http://weblogs.java.net/blog/jhook/archive/2005/09/jsf_avatar_vs_m_1.html">how
      to allow AJAX to exploit the existing capabilities of JSF</a>.  He
      called the idea &quot;avatar&quot; to describe a server side entity that
      represents the client.  JSF co-spec-lead Ed Burns helped refine
      the idea, and several demonstrations were presented at JavaOne
      2006. </p>

      <p>Essentially, the idea with avatar is to expose the JSF Request
      Processing lifecycle to components delivered to the browser via
      JSF, but enable them to easily use AJAX to interact with the view
      once the page is displayed in the browser.  This is accomplished
      by exposing a simple JavaScript library to the user and JSF
      component author, along with a server side extension to the JSF
      lifecycle, as shown in the following diagram.</p>

      <img src="images/ajax-whats-included.png"></img>

      <a name="Use Cases"></a><div class="section"><h3>Use Cases</h3>



      <p>To understand the available features of JSF Extensions Avatar,
      let's take a look at several use cases for AJAX enabling a JSF
      application.</p>

      <h4>AJAXifying an existing JSF Component</h4>

      <p>This is enabled by giving the page author a small set of
      JavaScript objects they can use in the <code>on*</code> javascript
      attributes.  For example:</p>

<div class="source"><pre><code>
&lt;h:commandButton value=&quot;Add Item&quot; action=&quot;#{orderEntry.addProduct}&quot; 
   onclick=&quot;DynaFaces.fireAjaxTransaction(this); return false;&quot;/&gt;
</code></pre></div>

       <p>Will cause an AJAX request to be sent to the server.  Any
       values in the current form will be submitted, the entire request
       processing lifecycle will be run, and the application logic will
       decide which parts of the view need to be refreshed.  The server
       will send down only those parts, where the JavaScript library
       will dynamically replace the content appropriately.</p>

       <p>In addition to <code>DynaFaces.fireAjaxTransaction</code>, the
       JavaScript library includes a subclass,
       <code>DynaFaces.installDeferredAjaxTransaction</code>, that turns
       any markup element in the page, including JSF components, into an
       AJAX capable widget.  For example:</p>

<div class="source"><pre><code>
&lt;h:panelGroup id=&quot;subview2&quot;&gt;
  &lt;d:scroller id=&quot;scroller&quot; navFacetOrientation=&quot;NORTH&quot; for=&quot;table&quot; 
          actionListener=&quot;#{ResultSetBean.processScrollEvent}&quot;&gt;
      &lt;f:facet name=&quot;next&quot;&gt;
        &lt;h:panelGroup&gt;
          &lt;h:outputText value=&quot;Next&quot;/&gt;
          &lt;h:graphicImage url=&quot;/images/arrow-right.gif&quot; /&gt;
        &lt;/h:panelGroup&gt;
      &lt;/f:facet&gt;

      &lt;f:facet name=&quot;previous&quot;&gt;
        &lt;h:panelGroup&gt;
          &lt;h:outputText value=&quot;Previous&quot;/&gt;
          &lt;h:graphicImage url=&quot;/images/arrow-left.gif&quot; /&gt;
        &lt;/h:panelGroup&gt;
      &lt;/f:facet&gt;

      &lt;f:facet name=&quot;current&quot;&gt;
        &lt;h:panelGroup&gt;
          &lt;h:graphicImage url=&quot;/images/duke.gif&quot; /&gt;
        &lt;/h:panelGroup&gt;
      &lt;/f:facet&gt;
  &lt;/d:scroller&gt;
  &lt;script type='text/javascript'&gt;
    document.forms[0].submit = function() {}; 
    var a = $('form:subview2').getElementsByTagName('a'); 
    $A(a).each(function(e) { 
      DynaFaces.installDeferredAjaxTransaction(e, 'mousedown', { render: 'form:table,form:subview2' }); 
    }); 
  &lt;/script&gt;
  &lt;/h:panelGroup&gt;
</code></pre></div>

    <p>The previous example AJAXifies the Scroller component from the <a href="https://bpcatalog.dev.java.net/files/documents/1432/34000/bp-ui-simple-5.jar">Sun
    Blueprints Simple UI Components</a> by calling
    <code>DynaFaces.installDeferredAjaxTransaction</code> on the
    mousedown of each hyperlink within the scroller component.  The
    arguments to the
    <code>DynaFaces.installDeferredAjaxTransaction</code> are:</p>

	<ol type="1">

	  <li>The anchor element itself.
	  </li>

	  <li>The JavaScript event on which to fire the command.
	  </li>

	  <li>The last argument is a JavaScript associative array
	  that supports a number of options.  In this example, we are
	  informing the server to re-render the subtrees with client ids
	  <code>form:table</code> and <code>form:subview2</code>.
	  </li>

	</ol>

        <p>Complete documentation on the supported options for
        <code>DynaFaces.fireAjaxTransaction</code> and
        <code>DynaFaces.installDeferredAjaxTransaction</code> can be
        found in <a href="reference-ajax.html">reference
        document</a>.</p>

    
      </div>

    </div>

  


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2006
    
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
